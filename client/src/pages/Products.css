/* =========================================
   0. 전역 초기화 및 레이아웃
========================================= */
* { box-sizing: border-box; }

body {
    font-family: 'Pretendard', 'Noto Sans KR', sans-serif;
    margin: 0; padding: 0;
    background-color: #f8f9fa; color: #333;
}

.products-wrapper {
    display: flex; flex-direction: column; min-height: 100vh; width: 100%;
    margin: 0 auto; background-color: white; overflow-x: hidden;
}

.top-bar, header, main, footer { width: 100%; }

/* =========================================
   1. 헤더 및 검색창
========================================= */
.top-bar {
    background-color: #212529; color: #e9ecef; padding: 10px 50px;
    display: flex; justify-content: flex-end; font-size: 0.85rem;
}
.top-right a { color: #e9ecef; text-decoration: none; margin-left: 15px; }

header {
    background-color: #fff; padding: 20px 50px;
    display: flex; justify-content: space-between; align-items: center;
    border-bottom: 1px solid #eee;
}
.logo { font-size: 1.8rem; font-weight: 800; color: #1a237e; letter-spacing: -0.5px; }

nav ul { list-style: none; padding: 0; margin: 0; display: flex; gap: 30px; }
nav ul li a { 
    text-decoration: none; color: #495057; font-weight: 600; font-size: 1rem;
    transition: color 0.2s; 
}
nav ul li a:hover { color: #1a237e; }

.header-search {
    display: flex; align-items: center; background-color: #f1f3f5;
    border-radius: 50px; padding: 8px 20px; width: 320px;
}
.header-search input {
    flex-grow: 1; border: none; outline: none; background: transparent !important;
    padding: 5px; font-size: 0.95rem; color: #333;
}
.header-search-btn {
    background: none; border: none; cursor: pointer; color: #868e96; font-size: 1.1rem;
}

/* =========================================
   2. 상품 목록
========================================= */
main { padding: 40px 20px; flex: 1; display: flex; flex-direction: column; align-items: center; }

.product-list-section { width: 100%; max-width: 1200px; text-align: center; }
#category-title { font-size: 2.2rem; margin-bottom: 10px; color: #212529; }
.subtitle { font-size: 1rem; color: #868e96; margin-bottom: 50px; }

.product-grid {
    display: grid; 
    grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); 
    gap: 30px; padding: 0 10px;
}

.product-card {
    background-color: #fff; border-radius: 12px; padding: 20px; text-align: center;
    border: 1px solid #f1f3f5; transition: transform 0.3s ease, box-shadow 0.3s ease;
    display: flex; flex-direction: column; justify-content: space-between; height: 100%;
}
.product-card:hover { transform: translateY(-7px); box-shadow: 0 10px 25px rgba(0,0,0,0.08); }

.img-wrapper {
    height: 240px; margin-bottom: 20px; display: flex; justify-content: center; align-items: center;
    background-color: #fdfdfd; border-radius: 8px;
}
.product-image { max-width: 90%; max-height: 95%; object-fit: contain; }

.product-title {
    font-size: 1.1rem; margin: 0 0 8px 0; color: #343a40; font-weight: 700;
    white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}
.product-price { font-size: 1.15rem; color: #1a237e; font-weight: 800; margin-bottom: 20px; }

.btn-cart {
    width: 100%; padding: 12px 0; background-color: #343a40; color: white;
    border-radius: 8px; border: none; cursor: pointer; font-weight: 600;
    transition: background-color 0.2s;
}
.btn-cart:hover { background-color: #1a237e; }

/* =========================================
   3. 페이지네이션 & 푸터
========================================= */
.pagination { display: flex; justify-content: center; gap: 8px; margin-top: 60px; }
.page-btn {
    padding: 8px 14px; border: 1px solid #dee2e6; background: white; color: #495057;
    cursor: pointer; border-radius: 6px; font-weight: 600;
}
.page-btn.active { background: #1a237e; color: white; border-color: #1a237e; }
.loading-msg, .no-data-msg { text-align: center; padding: 50px 0; color: #adb5bd; }

footer { 
    background-color: #212529; color: #adb5bd; text-align: center; padding: 30px 0; margin-top: auto; 
}

/* =========================================
   4. [핵심] 모달 디자인 (이미지 크기 강제 고정)
========================================= */
.modal {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background-color: rgba(0,0,0,0.7); 
    display: flex; justify-content: center; align-items: center; z-index: 1000;
    backdrop-filter: blur(4px);
}

.modal-content {
    background-color: white; padding: 0; 
    border-radius: 12px;
    width: 90%; max-width: 900px; 
    position: relative;
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
    overflow: hidden; 
    max-height: 90vh; /* 화면 넘치면 스크롤 */
    display: flex;
    flex-direction: column;
}

.close-btn {
    position: absolute; top: 15px; right: 20px; font-size: 2rem; 
    cursor: pointer; color: #868e96; z-index: 10; transition: color 0.2s;
}
.close-btn:hover { color: #212529; }

/* 전체 스크롤 컨테이너 */
.modal-body-container {
    overflow-y: auto; 
    padding: 40px;
}

/* --- [1. 상단] 책 정보 영역 (이미지 + 텍스트) --- */
.modal-book-detail {
    display: flex;
    gap: 40px; 
    margin-bottom: 40px;
    align-items: flex-start;
}

/* [핵심 수정] 이미지 틀: 무조건 동일한 크기의 '흰색 카드'로 만듦 */
.modal-image-wrapper {
    /* 1. 크기 강제 고정 (이 크기로 무조건 통일됨) */
    width: 230px !important;  
    height: 330px !important; 
    
    flex-shrink: 0 !important; /* 찌그러짐 방지 */
    
    /* 2. 카드 디자인 적용 (테두리와 그림자를 '틀'에 줌) */
    background-color: #fff !important; /* 배경을 흰색으로 */
    border: 1px solid #eee !important;
    border-radius: 8px !important;
    box-shadow: 0 8px 20px rgba(0,0,0,0.08) !important;
    
    /* 3. 내부 이미지 중앙 정렬 */
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    padding: 15px !important; /* 이미지와 테두리 사이 여백 */
    
    margin: 0 auto; /* 모바일 등에서 중앙 정렬 */
}

/* [핵심 수정] 이미지: 비율 유지하며 틀 안에 꽉 차게 */
#modal-image {
    /* 부모(틀)의 크기를 넘지 않도록 설정 */
    max-width: 100% !important;
    max-height: 100% !important;
    
    width: auto !important; 
    height: auto !important; 
    
    /* 비율 유지하며 틀 안에 쏙 들어가게 함 (잘리지 않음) */
    object-fit: contain !important; 
    
    /* 이미지 자체에는 그림자 제거 (틀에 그림자가 있으므로) */
    box-shadow: none !important; 
    border-radius: 4px;
}

/* 텍스트 정보 박스 */
.modal-text {
    flex: 1; /* 남은 공간 채우기 */
    display: flex; flex-direction: column;
}

#modal-title {
    font-size: 1.8rem; font-weight: 800; color: #212529;
    margin: 0 0 10px 0; line-height: 1.3;
}
.meta { color: #868e96; font-size: 1rem; margin-bottom: 20px; }
.price { font-size: 1.8rem; color: #d6336c; font-weight: 800; margin-bottom: 20px; }

.divider { height: 1px; background-color: #dee2e6; margin: 0 0 20px 0; }

#modal-description {
    font-size: 1rem; line-height: 1.6; color: #495057;
    margin-bottom: 30px;
    max-height: 150px; overflow-y: auto; /* 너무 길면 스크롤 */
}

.btn-add-cart {
    width: 100%; padding: 15px; background-color: #212529; color: white;
    border: none; border-radius: 8px; font-size: 1.1rem; font-weight: 700;
    cursor: pointer; transition: background 0.2s; margin-top: auto;
}
.btn-add-cart:hover { background-color: #1a237e; }


/* --- [2. 하단] 댓글 영역 --- */
.modal-comment-section {
    background-color: #f8f9fa; 
    border-radius: 12px;
    padding: 30px;
    border: 1px solid #f1f3f5;
}

.modal-comment-section h4 {
    margin: 0 0 15px 0; font-size: 1.2rem; color: #343a40; font-weight: 700;
}

.modal-comment-section textarea {
    width: 100%; height: 100px; padding: 15px; border: 1px solid #ced4da;
    border-radius: 8px; font-size: 0.95rem; resize: none; background-color: white;
    transition: border-color 0.2s;
}
.modal-comment-section textarea:focus { border-color: #1a237e; outline: none; }

.btn-comment-submit {
    margin-top: 10px; float: right; 
    padding: 10px 25px; background-color: #495057; color: white;
    border: none; border-radius: 6px; font-weight: 600; cursor: pointer;
}
.btn-comment-submit:hover { background-color: #212529; }

.comment-list-placeholder {
    clear: both; padding-top: 40px; text-align: center; color: #adb5bd; font-size: 0.9rem;
}

/* 반응형 (모바일) */
@media (max-width: 768px) {
    .modal-content { width: 95%; max-height: 85vh; }
    .modal-book-detail { flex-direction: column; align-items: center; gap: 20px; }
    .modal-image-wrapper { width: 180px; height: 260px; }
    .modal-text { text-align: center; }
    #modal-description { text-align: left; }
    .btn-comment-submit { width: 100%; margin-top: 10px; float: none; }
}


